{% extends "base.html" %}
{% block title %}Recover Access Key | Nebula-Nexus{% endblock %}
{% block styles %}
<!-- Shared Styles -->
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=check" />
<link rel="stylesheet" href="{{ url_for('static', path='/css/global.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/constellation.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/navigation.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/forms.css') }}">
{% endblock %}

{% block content %}
<!-- Background -->
<div id="stars-container"></div>
<canvas id="constellation-canvas"></canvas>

<!-- Navigation -->
<nav class="navigation">
    <a href="/" class="logo">Nebula-Nexus</a>
    <div class="hamburger" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div class="nav-links">
        <a href="/" class="nav-link">Home</a>
        <a href="/about" class="nav-link">About</a>
        <a href="/auth/login" class="nav-link">Login</a>
        <a href="/auth/signup" class="nav-link signup">Sign Up</a>
    </div>
</nav>

<!-- Main Content -->
<main class="main-content">
    <div class="form-container">
        <h2 class="recover-h2">Recover Access Key</h2>
        <p class="recover-p">Enter your cosmic address to receive recovery instructions</p>

        <form action="/auth/recover-access-key" method="post" class="form">
            <input type="email" name="email" placeholder="Cosmic Address" id="emailForum" autocomplete="off" required>
            {% if message %}
            <div class="success-div">
                <p class="success-message">Email sent <span class="material-symbols-outlined">check</span></p>
                <p class="s">{{ message }} </p>
            </div>
            {% endif %}
            <input type="submit" value="Recover">
        </form>

        <div class="footer-links">
            <a href="/auth/login">Back to Login</a>
        </div>
    </div>
</main>

{% endblock %}



{% block scripts %}
<!-- Scripts -->
<script src="{{ url_for('static', path='/js/navigation.js') }}"></script>
<script src="{{ url_for('static', path='/js/constellation.js') }}"></script>
<script src="{{ url_for('static', path='/js/forms.js') }}"></script>

<script>
    window.addEventListener('unload', function () { });

    // Fallback: If for some reason it DOES cache, this forces a refresh
    window.onpageshow = function (event) {
        if (event.persisted) {
            window.location.reload();
        }
    };
</script>
{% endblock %}