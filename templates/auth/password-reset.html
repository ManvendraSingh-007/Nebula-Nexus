{% extends "base.html" %}
{% block title %} Reset Access Key | Nebula-Nexus {% endblock %}
{% block styles %}
<!-- Shared Styles -->
<link rel="stylesheet" href="{{ url_for('static', path='/css/global.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/constellation.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/forms.css') }}">
<style>
    .error-message {
        color: #ff6b6b;
        font-size: 0.85rem;
        margin-top: 0.5rem;
        display: none;
    }

    .error-message.show {
        display: block;
    }
</style>
{% endblock %}

{% block content %}
<!-- Background -->
<div id="stars-container"></div>
<canvas id="constellation-canvas"></canvas>

<!-- Main Content -->
<main class="main-content">
    <div class="form-container">
        {% if error %}
        <h2>Link Expired</h2>
        <p class="error-text">{{ error }}</p>
        <a href="/auth/recover-access-key" class="back-link">Request New Link</a>
        {% else %}
        <h2 class="recover-h2">Calibrate Access Key</h2>
        <p class="recover-p">Configure new security credentials</p>

        <form action="/auth/reset-access-key" method="post" class="form" id="resetForm">
            <input type="hidden" name="reset_token" value="{{ token }}">

            <input type="password" name="new_password" id="newPassword" placeholder="New Access Key" required>
            <input type="password" name="confirm_password" id="confirmPassword" placeholder="Confirm Access Key"
                required>

            <div class="glyph-trigger" onclick="togglePasswords()">
                <p id="symbol">â†’</p>
                <p id="glyph-text">SHOW ACCESS KEYS</p>
            </div>

            <p class="error-message" id="errorMsg">Access keys do not match</p>

            <input type="submit" value="Calibrate Access Key">
        </form>
        {% endif %}
    </div>
</main>
{% endblock %}

{% block scripts %}
<!-- Scripts -->
<script src="{{ url_for('static', path='/js/constellation.js') }}"></script>
<script src="{{ url_for('static', path='/js/forms.js') }}"></script>
{% endblock %}